/*1370233076,173217837*/

if (self.CavalryLogger) { CavalryLogger.start_js(["xL0oy"]); }

__d("RelationshipStatus",["ArbiterMixin","CSS","DOM","Event","copyProperties"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('CSS'),i=b('DOM'),j=b('Event'),k=b('copyProperties');function l(m,n,o,p,q){this.init(m,n,o,p,q);}k(l,{UNDEFINED:0,SINGLE:1,WIDOWED:7,SEPARATED:8,DIVORCED:9,StatusChangeEvent:'STATUS_CHANGE',PartnerChangeEvent:'PARTNER_CHANGE',CheckAnniversaryEvent:'ANNIVERSARY',register:function(m,n){m.subscribe(this.CheckAnniversaryEvent,function(o,p){h.conditionClass(n,'hidden_elem',!p);});},isPartnerlessStatus:function(m){return m==l.UNDEFINED||m==l.SINGLE||m==l.WIDOWED||m==l.SEPARATED||m==l.DIVORCED;}});k(l.prototype,g,{init:function(m,n,o,p,q){this.relationship=m;this.friendselector=n;this.pending=o;this.current=p;this.root=q;this.friendselector.subscribe('init',this.onLoad.bind(this));j.listen(this.relationship,'change',this.changedStatus.bind(this));},onLoad:function(){this.friendselector.subscribe('select',function(m,n){this.select(n);}.bind(this));this.friendselector.subscribe('unselect',function(m,n){this.unselect();}.bind(this));},showWarnings:function(){var m=this.getRelationshipStatus(),n=l.isPartnerlessStatus(m),o=i.find(this.root,'div.statusChange'),p=i.scry(this.root,'div.statusSingle')[0],q=i.scry(this.root,'div.pendingStatus')[0],r=this.friendselector.getSelectedId(),s=!n&&this.current.partner&&this.current.status!=m&&this.current.partner.uid==r;this.inform(l.StatusChangeEvent,{status:this.getRelationshipStatus(),partnerless:n,partner:(n?null:r)});var t=!n&&r&&(!this.current.partner||this.current.partner.uid!=r);if(t)this.inform(l.PartnerChangeEvent,{old_partner:(this.current.partner?this.current.partner.uid:null),new_partner:r,partner_changed:t});var u=this.current.partner&&this.current.partner.uid==r&&this.current.status==m&&this.current.pending;this.checkAnniversary();h.conditionShow(o,s||t);if(p){var v=n&&(this.current.status!==m);h.conditionShow(p,v);}if(q)h.conditionShow(q,u);},getRelationshipStatus:function(){return this.relationship.options[this.relationship.selectedIndex].value;},changedStatus:function(event){var m=event.getTarget().value,n=i.find(this.root,'div.relPartner'),o=l.isPartnerlessStatus(m);h.setClass(this.root,'relStatus_'+m);h.conditionClass(n,'hidden_elem',o);this.showWarnings();},select:function(m){i.setContent(this.pending,m.selected.text);this.checkAnniversary();this.showWarnings();},unselect:function(m){this.checkAnniversary();this.showWarnings();},checkAnniversary:function(){var m=!l.isPartnerlessStatus(this.getRelationshipStatus());this.inform(l.CheckAnniversaryEvent,m);}});e.exports=l;});
__d("ComposerXEmptyAttachment",["Class","ComposerXAttachment","copyProperties"],function(a,b,c,d,e,f){var g=b('Class'),h=b('ComposerXAttachment'),i=b('copyProperties');function j(k,l){this.parent.construct(this);this._root=k;if(l)this.attachmentClassName=l;}g.extend(j,h);i(j.prototype,{getRoot:function(){return this._root;}});e.exports=j;});
__d("RequiredFormListener",["Event","Input"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Input');g.listen(document.documentElement,'submit',function(i){var j=i.getTarget().getElementsByTagName('*');for(var k=0;k<j.length;k++)if(j[k].getAttribute('required')&&h.isEmpty(j[k])){j[k].focus();return false;}},g.Priority.URGENT);});
__d("TimelineCollectionsCuration",["getContextualParent","CSS","Parent","$","cx"],function(a,b,c,d,e,f){var g=b('getContextualParent'),h=b('CSS'),i=b('Parent'),j=b('$'),k=b('cx'),l={hideAppSection:function(m){var n=g(j(m),true),o=['getTimelineUnitFromChildElement','getMedleyAppSectionFromChildElement'];for(var p=0;p<o.length;p++){var q=l[o[p]](n);if(q)return h.hide(q);}},getTimelineUnitFromChildElement:function(m){return i.byClass(m,'fbTimelineUnit');},getMedleyAppSectionFromChildElement:function(m){return i.byClass(m,"_30f");}};e.exports=l;});
__d("OGCollectionAddToggle",["CSS","DOM","Event","TimelineCollectionsCuration","csx","cx","tidyEvent"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('Event'),j=b('TimelineCollectionsCuration'),k=b('csx'),l=b('cx'),m=b('tidyEvent'),n={},o="_4__4";function p(r,s,t){g.conditionShow(r,t);g.conditionClass(s,o,t);}var q={initTypeaheadToggleInReport:function(r,s,t){h.prependContent(h.find(j.getTimelineUnitFromChildElement(r),"._70o"),s);if(n[t]===undefined){n[t]=g.hasClass(s,o);}else p(r,s,n[t]);m(i.listen(s,'click',function(u){p(r,s,n[t]=!n[t]);}));}};e.exports=q;});
__d("HubsTypeaheadView",["Arbiter","AsyncRequest","Class","ContextualTypeaheadView","copyProperties","CSS","DOM","Event","tx","$"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('Class'),j=b('ContextualTypeaheadView'),k=b('copyProperties'),l=b('CSS'),m=b('DOM'),n=b('Event'),o=b('tx'),p=b('$');function q(r,s){this.parent.construct(this,r,s);if(s.allowDedupe)this.subscribe('select',this.selectDuplicates.bind(this));}i.extend(q,j);k(q,{initFreeformBoxes:function(){var r=m.scry(document,'div.fbAddFormDialog')[0];if(!r)return;var s=m.find(r,'form');n.listen(s,'submit',function(){m.scry(s,'div.fbFreeformInput').forEach(function(t){if(m.find(t,'input.inputtext').value)l.addClass(t.firstChild,'selected');});});}});k(q.prototype,{canHide:true,hasHiddenDupes:false,hide:function(){return this.canHide?this.parent.hide():null;},reset:function(){return this.canHide?this.parent.reset():null;},_createFreeFormNode:function(r){return {text:this.showCreatePrompt?o._("Add \"{partial_name}\"",{partial_name:r}):r,orig_text:r,type:'addnew calltoaction'};},render:function(r,s,t){if(this.alwaysRender&&r!=='')if(this.allowFreeformEntry){s.push(this._createFreeFormNode(r));}else{var u=r.toLowerCase().trim(),v=false;for(var w=0;w<s.length;w++)if(u==s[w].text.toLowerCase().trim()){v=true;break;}if(!v)s.push(this._createFreeFormNode(r));}var x=s.length;for(var y=0;y<s.length;y++)if(!s[y].uid)x--;if(this.allowDedupe&&x>1)s.push({text:"Mark Duplicate Results",type:'dupelink calltoaction'});return this.parent.render(r,s,t);},selectDuplicates:function(r,s){if(!s.selected.type.match('dupelink'))return;var t=[];for(var u=0;u<this.results.length;u++){if(!this.results[u].uid)continue;t.push(this.results[u].uid);}var v=g.subscribe('typeahead/'+this.collectionID+'/confirmDupes',function(w,x){var y=this.results.map(function(ba){return ba.uid;});for(var z=0;z<x.dupe_ids.length;z++){var aa=y.indexOf(x.dupe_ids[z]);l.hide(this.items[aa]);}this.hasHiddenDupes=x.dupe_ids.length>0;}.bind(this));g.subscribe('typeahead/'+this.collectionID+'/finishDupes',function(w,x){g.unsubscribe(v);this.canHide=true;this.hasHiddenDupes&&l.hide(m.find(this.content,'.dupelink'));this.hasHiddenDupes=false;}.bind(this));this.canHide=false;new h('/ajax/typeahead/quality/duplicates').setData({ids:t,surface:p('collections_surface').value,collection_id:this.collectionID}).send();}});e.exports=q;});
__d("MultiInferenceMegaphone",["AsyncRequest","CSS","DOM","DOMClone","Event","csx","cx","$"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('CSS'),i=b('DOM'),j=b('DOMClone'),k=b('Event'),l=b('csx'),m=b('cx'),n=b('$'),o={init:function(p,q,r,s){this._checkedImage=r;this._disableBlock=s;p.forEach(function(t){k.listen(t,'click',function(u){var v=u.target,w=i.scry(v,"^._52bq").pop();if(w||h.hasClass(v,"_52bq"))return;this._setChecked(t);this._disableMP();var x=q[t.id];if(x)new g(x).setMethod('POST').setStatusElement('typeahead_load_indicator').send();}.bind(this));}.bind(this));},initTypeahead:function(p,q,r,s,t){this._typeaheadBlock=p;this._typeaheadInput=i.scry(p,'input[name="'+t+'"]').pop();k.listen(p,'click',function(u){this._setTypeaheadFocus();}.bind(this));q.subscribe('select',function(u,v){var w=v.selected;if(!w||!(w.uid||w.text))return;this._setChecked(this._typeaheadBlock);this._disableMP();var x={};if(w.uid)x[s]=w.uid;if(w.text)x[t]=w.text;new g(r).setMethod('POST').setData(x).setStatusElement('typeahead_load_indicator').send();}.bind(this));},_disableMP:function(){var p=n('nf_megaphone_school_add_content');if(p)i.appendContent(p,this._disableBlock);},_setTypeaheadFocus:function(){if(!this._typeaheadInput)return;this._typeaheadInput.focus();},_setChecked:function(p){if(!p)return;var q=i.scry(p,"._51w4").pop();if(q)i.replace(q,j.deepClone(this._checkedImage));}};e.exports=o;});
__d("TimelineAboutUnitRow",["CSS","RelationshipStatus","copyProperties","cx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('RelationshipStatus'),i=b('copyProperties'),j=b('cx');function k(l,m,n,o){this._root=l;this._typeahead=m;this._selector=n;this._datepicker=o;this._typeaheadIsSet=false;this._selectorIsSet=!n;this._listeners=[m.subscribe('select',this.setTypeahead.bind(this)),m.subscribe('unselect',this.unsetTypeahead.bind(this))];if(n)this._listeners.push(n.subscribe('change',this.checkSelector.bind(this)));}i(k.prototype,{checkSelector:function(){var l=this._selector.getValue(),m=h.isPartnerlessStatus(l);this._selectorIsSet=l!=='0';g.conditionClass(this._selector.getButton(),"_58pg",this._selectorIsSet);if(m){this._typeahead.getCore().reset();this._datepicker.setDate();}g.conditionClass(this._typeahead.getElement(),'hidden_elem',m);if(this._datepicker)g.conditionClass(this._datepicker,'hidden_elem',m);this.toggleButtons();},setTypeahead:function(){this._typeaheadIsSet=true;this.toggleButtons();},unsetTypeahead:function(){this._typeaheadIsSet=false;this.toggleButtons();},toggleButtons:function(){g.conditionClass(this._root,"_5789",(this._selector&&this._selectorIsSet)||this._typeaheadIsSet);}});e.exports=k;});
__d("TimelineAboutUnitAddCityDialog",["Arbiter","CSS","DOM","DOMEventListener","Button","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('DOM'),j=b('DOM'),k=b('DOMEventListener'),l=b('Button'),m=b('copyProperties');function n(o,p,q,r){this.dialog=p;var s=p.getRoot();this.icon=o;this._typeahead=q;this._radioCities=j.scry(s,'input[type="radio"]');this._textOther=i.find(s,'.textOther');this._buttonSave=j.scry(s,'button[name="save"]')[0];if(this._radioCities.length>0){this._radioCityOther=i.find(s,'.radioCityOther');this._typeahead.subscribe('select',this._enableSaveButtonTypeahead.bind(this));this._typeahead.subscribe('unselect',this._disableSaveButtonTypeahead.bind(this));for(var t=0;t<this._radioCities.length-1;t++)k.add(this._radioCities[t],'click',this._enableSaveButton.bind(this));k.add(this._radioCityOther,'click',this._saveButtonCityOther.bind(this));}else{this._typeahead.subscribe('select',this._enableSaveButton.bind(this));this._typeahead.subscribe('unselect',this._disableSaveButton.bind(this));}k.add(this.icon,'click',function(){p.show();});if(this._radioCityOther){k.add(this._textOther,'focus',this._selectRadioOther.bind(this));k.add(this._radioCityOther,'click',this._focusTextOther.bind(this));}if(r)p.show();g.subscribe(n.SUBMIT,this.submitted.bind(this));}m(n.prototype,{submitted:function(){var o=false;if(this._radioCities.length===0){if(this._typeahead.getCore().getHiddenValue()!=='')o=true;}else{for(var p=0;p<this._radioCities.length-1;p++)if(this._radioCities[p].checked){o=true;break;}if(this._radioCityOther.checked)if(this._typeahead.getCore().getHiddenValue()!==''){o=true;}else o=false;}if(o)h.hide(this.icon);},_focusTextOther:function(){this._textOther.focus();},_selectRadioOther:function(){this._radioCityOther.checked=true;if(this._typeahead.getCore().getHiddenValue()!==''){l.setEnabled(this._buttonSave,true);}else l.setEnabled(this._buttonSave,false);},_enableSaveButton:function(){l.setEnabled(this._buttonSave,true);},_disableSaveButton:function(){l.setEnabled(this._buttonSave,false);},_enableSaveButtonTypeahead:function(){if(this._radioCityOther.checked)l.setEnabled(this._buttonSave,true);},_disableSaveButtonTypeahead:function(){if(this._radioCityOther.checked)l.setEnabled(this._buttonSave,false);},_saveButtonCityOther:function(){if(this._typeahead.getCore().getHiddenValue()!==''){l.setEnabled(this._buttonSave,true);}else l.setEnabled(this._buttonSave,false);}});n.SUBMIT='AddSchoolCitySubmitted';e.exports=n;});
__d("TimelineStickyHeaderComposerX",["Event","Arbiter","Bootloader","CSS","ComposerXController","DOMQuery","Parent","Run","TimelineComposerUtilities","TimelineContentLoader","TimelineStickyHeader","Vector","copyProperties","csx","cx"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('Bootloader'),j=b('CSS'),k=b('ComposerXController'),l=b('DOMQuery'),m=b('Parent'),n=b('Run'),o=b('TimelineComposerUtilities'),p=b('TimelineContentLoader'),q=b('TimelineStickyHeader'),r=b('Vector'),s=b('copyProperties'),t=b('csx'),u=b('cx');function v(x){return x&&m.byClass(x.getContext(),"_2wp");}function w(x){this._composerRoot=x;this._tokens=[o.listenToSetEstimatedDate(this._composerRoot,p.capsuleForCurrentSection),o.listenToPublish(this._composerRoot,this._close.bind(this)),h.subscribe('PhotoSnowlift.OPEN',this._close.bind(this)),h.subscribe('TimelineMLE/mleFlyoutShown',function(y,z){if(v(z)===this._composerRoot)k.reset(this._composerRoot);}.bind(this)),h.subscribe('composer/initializedAttachment',function(y,z){if(z.composerRoot===this._composerRoot){this._registerClickToDismiss();if(!z.isInitial)this._closeMLE();}else this._close();}.bind(this)),h.subscribe(q.ADJUST_WIDTH,this._toggleNarrowMode.bind(this))];this._clickCancelToken=o.listenToCancel(this._composerRoot,this._close.bind(this));n.onLeave(function(){while(this._tokens.length)this._tokens.pop().unsubscribe();this._clearClickDismissToken();if(this._clickCancelToken){this._clickCancelToken.remove();this._clickCancelToken=null;}}.bind(this));}s(w.prototype,{_toggleNarrowMode:function(event,x){i.loadModules(['Tooltip'],function(y){var z=r.getElementDimensions(x).x>400,aa=l.scry(this._composerRoot,"._9lb");j.conditionClass(this._composerRoot,"_2wq",z);for(var ba=0;ba<aa.length;ba++){var ca=aa[ba],da=l.getText(ca);if(z){y.set(ca,da);}else y.remove(ca);}}.bind(this));return false;},_registerClickToDismiss:function(){var x=j.hasClass(l.find(this._composerRoot,"._yq"),"_519b");if(!x){this._clearClickDismissToken();return;}this._clickDismissToken=g.listen(document.body,'click',function(y){var z=m.byClass(y.getTarget(),"_2wp");if(!z){this._close();this._clearClickDismissToken();}}.bind(this));},_clearClickDismissToken:function(){if(this._clickDismissToken){this._clickDismissToken.remove();this._clickDismissToken=null;}},_close:function(){this._clearClickDismissToken();this._closeMLE();k.reset(this._composerRoot);},_closeMLE:function(){i.loadModules(['TimelineMLE'],function(x){var y=x.getFlyout();if(v(y)===this._composerRoot)x.hideFlyout();}.bind(this));}});e.exports=w;});
__d("ProgressiveDatepicker",["Arbiter","ArbiterMixin","CSS","DataStore","DOM","Event","Parent","copyProperties","shield"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('CSS'),j=b('DataStore'),k=b('DOM'),l=b('Event'),m=b('Parent'),n=b('copyProperties'),o=b('shield');function p(s){return new Date(s[0],s[1],s[2],s[3],s[4]);}function q(s,t){while(s.length)k.insertAfter(t,s.pop());}function r(s,t){this._root=s;this._savedLabels={};this._savedPeriodsBack=[];this._savedPeriodsFront=[];this._menus={};this._mintime=t.mintime&&new Date(1000*t.mintime);this._maxtime=t.maxtime&&new Date(1000*t.maxtime);j.set(s,'datepicker',this);k.scry(s,'select').forEach(function(u){l.listen(u,'change',o(this._handleChange,this,u));var v=m.byClass(u,'period');l.listen(u,'focus',i.addClass.curry(v,'periodFocus'));l.listen(u,'blur',i.removeClass.curry(v,'periodFocus'));this._setMenuSelectionState(u);if(u.getAttribute('data-name')==='month')this._filterInvalidDates();}.bind(this));k.scry(s,'a.periodLabel').forEach(function(u){var v=m.byClass(u,'period');l.listen(u,'click',function(){i.addClass(v,'periodSelected');i.addClass(v,'periodFocus');});});this._filterInvalidDates();this.inform('initialized',this,g.BEHAVIOR_STATE);}n(r,{PERIODS:['year','month','day','hour','minute'],getInstance:function(s){return s?j.get(s,'datepicker'):null;}});n(r.prototype,h,{setDate:function(s,t,u,v,w){this._addSavedPeriods();var x=r.PERIODS;for(var y=0;y<x.length;y++)this._setValueForPeriod(x[y],arguments[y]);this._filterInvalidDates();this.inform('changed');},setDateWithTimestamp:function(s){var t=new Date(s);this.setDate(t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes());},isSet:function(){var s=r.PERIODS;for(var t=0;t<s.length;t++)if(this._getValueForPeriod(s[t]))return true;return false;},getRoot:function(){return this._root;},getValues:function(){var s=r.PERIODS,t={};for(var u=0;u<s.length;u++){var v=this._getValueForPeriod(s[u]);if(v)t[s[u]]=v;}return t;},getDate:function(){var s=this.getValues();return new Date(s.year||0,(s.month||1)-1,s.day||1,s.hour||0,s.minute||0);},getTimestamp:function(){return Math.round(this.getDate().getTime()/1000);},_setValueForPeriod:function(s,t){var u=this._menuForPeriodName(s);if(!u)return;if(t===undefined)t='';var v=u.options;for(var w=0,x=v.length;w<x;w++)if(v[w].value==t){u.selectedIndex=w;break;}this._setMenuSelectionState(u);},_getValueForPeriod:function(s){var t=this._menuForPeriodName(s);return (t&&t.options[t.selectedIndex].value);},_handleChange:function(s){this._setMenuSelectionState(s);this._filterInvalidDates();this.inform('changed');},_setMenuSelectionState:function(s){var t=m.byClass(s,'period');if(!t)return;if(i.hasClass(t,'periodRequired')){if(s.selectedIndex===0)s.selectedIndex=1;}else this._updateLabel(s);var u=s.getAttribute('data-name'),v=s.options[s.selectedIndex].value;i.conditionClass(t,'periodSelected',v);i.conditionClass(this._root,this._selectedClass(u),v);if(!v)this._resetMenu(r.PERIODS.indexOf(u)+1);},_updateLabel:function(s){var t=s.getAttribute('data-name'),u=s.options[0];if(!this._savedLabels[t])this._savedLabels[t]=k.getText(u);if(s.selectedIndex===0){k.setContent(u,this._savedLabels[t]);}else k.setContent(u,'--');},_daysInMonth:function(s,t){return new Date(s||1999,t+1||1,0).getDate();},_daysInCurrentMonth:function(){return this._daysInMonth(this._getValueForPeriod('year'),this._getValueForPeriod('month')-1);},_menuForPeriodName:function(s){if(!this._menus[s])this._menus[s]=k.scry(this._root,'.'+s+'Menu')[0];return this._menus[s];},_selectedClass:function(s){return 'uiProgressiveDatepickerSelected-'+s;},_resetMenu:function(s){var t=r.PERIODS;for(;s<t.length;s++){var u=t[s],v=this._menuForPeriodName(u);if(!v)return;if(m.byClass(v,'periodRequired')){v.selectedIndex=1;}else{i.removeClass(m.byClass(v,'period'),'periodSelected');i.removeClass(this._root,this._selectedClass(u));v.selectedIndex=0;this._updateLabel(v);}}},_addSavedPeriods:function(){var s=r.PERIODS;for(var t=0;t<s.length;t++){var u=this._menuForPeriodName(s[t]);if(!u)return;this._savedPeriodsFront[t]||(this._savedPeriodsFront[t]=[]);this._savedPeriodsBack[t]||(this._savedPeriodsBack[t]=[]);var v=u.options[0],w=u.options[u.options.length-1];if(t===r.PERIODS.indexOf('year')){q(this._savedPeriodsBack[t],v);q(this._savedPeriodsFront[t],w);}else{q(this._savedPeriodsFront[t],v);q(this._savedPeriodsBack[t],w);}}},_filterInvalidDates:function(){this._addSavedPeriods();var s=r.PERIODS,t=this.getValues();for(var u=0;u<s.length;u++){var v=this._menuForPeriodName(s[u]);if(!v)return;this._savedPeriodsFront[u]||(this._savedPeriodsFront[u]=[]);this._savedPeriodsBack[u]||(this._savedPeriodsBack[u]=[]);for(var w=1;w<v.options.length;){var x=v.options[w],y=[((u-1>=0)?t[s[0]]:0),((u-1>=1)?t[s[1]]-1:0),((u-1>=2)?t[s[2]]:1),((u-1>=3)?t[s[3]]:0),((u-1>=4)?t[s[4]]:0)];y[u]=x.value;if(u===r.PERIODS.indexOf('month'))y[u]=y[u]-1;var z=p(y),aa=[((u-1>=0)?t[s[0]]:9001),((u-1>=1)?t[s[1]]-1:11),((u-1>=2)?t[s[2]]:this._daysInCurrentMonth()),((u-1>=3)?t[s[3]]:23),((u-1>=4)?t[s[4]]:59)];aa[u]=x.value;if(u===r.PERIODS.indexOf('month')){aa[u]--;aa[u+1]=this._daysInMonth(aa[0],aa[1]);}var ba=p(aa),ca=(z>this._maxtime),da=(ba<this._mintime),ea=(u===r.PERIODS.indexOf('day')&&x.value>this._daysInCurrentMonth());if(da||ca||ea){if(x.selected){x.selected=false;this._resetMenu(u);}k.remove(x);if(ca||ea){this._savedPeriodsBack[u].push(x);}else this._savedPeriodsFront[u].push(x);}else w++;}}}});e.exports=r;});
__d("TypeaheadPreventSubmitOnEnter",["Event","Keys","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Keys'),i=b('copyProperties');function j(k){this._typeahead=k;}i(j.prototype,{_listener:null,enable:function(){var k=this._typeahead.getCore().getElement();this._listener=g.listen(k,'keypress',function(l){if(g.getKeyCode(l)==h.RETURN)l.kill();});},disable:function(){this._listener.remove();this._listener=null;}});e.exports=j;});
__d("legacy:PreventSubmitOnEnterTypeaheadBehavior",["TypeaheadPreventSubmitOnEnter"],function(a,b,c,d){var e=b('TypeaheadPreventSubmitOnEnter');if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.preventSubmitOnEnter=function(f){f.enableBehavior(e);};},3);
__d("TypeaheadRequireSelection",["Event","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('copyProperties');function i(j){this._typeahead=j;}h(i.prototype,{_subscription:null,_eventListener:null,enable:function(){var j=this._typeahead.getCore(),k=j.getElement().form;function l(){!j.getHiddenValue()&&j.reset();}l();this._subscription=j.subscribe('blur',l);if(k)this._eventListener=g.listen(k,'submit',l);},disable:function(){this._typeahead.getCore().unsubscribe(this._subscription);this._subscription=null;if(this._eventListener){this._eventListener.remove();this._eventListener=null;}}});e.exports=i;});
__d("legacy:RequireSelectionTypeaheadBehavior",["TypeaheadRequireSelection"],function(a,b,c,d){var e=b('TypeaheadRequireSelection');if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.requireSelection=function(f){f.enableBehavior(e);};},3);
__d("TypeaheadSetPhotoOnSelect",["Event","function-extensions","CSS","DOM","copyProperties"],function(a,b,c,d,e,f){var g=b('Event');b('function-extensions');var h=b('CSS'),i=b('DOM'),j=b('copyProperties');function k(l){this._typeahead=l;}j(k.prototype,{_eventListener:null,_subscription:null,enable:function(){var l=i.scry(this._typeahead.getElement(),'.photo')[0];if(l){if(!i.isNodeOfType(l,'img')){var m=i.create('img',{className:l.className});i.replace(l,m);l=m;}var n=h.hide.curry(l),o=h.show.curry(l);this._eventListener=g.listen(l,{load:o,error:n,abort:n});this._subscription=this._typeahead.subscribe('select',function(p,q){var r=q.selected.photo||this._typeahead.view.fallbackPhoto;r?l.setAttribute('src',r):n();}.bind(this));}},disable:function(){this._eventListener.remove();this._eventListener=null;this._typeahead.unsubscribe(this._subscription);this._subscription=null;}});e.exports=k;});
__d("legacy:SetPhotoOnSelectTypeaheadBehavior",["TypeaheadSetPhotoOnSelect"],function(a,b,c,d){var e=b('TypeaheadSetPhotoOnSelect');if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.setPhotoOnSelect=function(f){f.enableBehavior(e);};},3);
__d("TypeaheadShowResultsOnFocus",["Event","copyProperties","Keys"],function(a,b,c,d,e,f){var g=b('Event'),h=b('copyProperties'),i=b('Keys');function j(k){this._typeahead=k;}h(j.prototype,{_subscription:null,_keyUpListener:null,_focusListener:null,enable:function(){var k=this._typeahead.getCore(),l=this._typeahead.getData();k.resetOnKeyup=false;this._subscription=this._typeahead.subscribe('bootstrap',function(m,n){this.firstFetch(n,k,l);}.bind(this));this._keyUpListener=g.listen(k.getElement(),'keyup',function(event){if(g.getKeyCode(event)==i.BACKSPACE||g.getKeyCode(event)==i.DELETE)this.respond(k,l);}.bind(this));this._focusListener=g.listen(k.getElement(),'focus',function(event){this.respond(k,l);}.bind(this));},disable:function(){this._typeahead.unsubscribe(this._subscription);this._subscription=null;this._keyUpListener.remove();this._keyUpListener=null;this._focusListener.remove();this._focusListener=null;},firstFetch:function(k,l,m){!k.bootstrapping&&this.respond(l,m);},respond:function(k,l){if(!k.getValue()){var m=this.getUidsFromData(l);k.setValue('');var n=l.buildUids(' ',m);l.respond('',n);}},getUidsFromData:function(k){var l=k.getAllEntries(),m=[];for(var n in l)m.push({uid:l[n].uid,index:l[n].index});m.sort(function(o,p){return o.index-p.index;});return m.map(function(o){return o.uid;});}});e.exports=j;});
__d("TypeaheadShowBootstrapOnFocus",["copyProperties","Class","TypeaheadShowResultsOnFocus"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('Class'),i=b('TypeaheadShowResultsOnFocus'),j=3;function k(l){this.parent.construct(this,l);this._uids=[];}h.extend(k,i);g(k.prototype,{firstFetch:function(l,m,n){if(!l.bootstrapping){this._uids=this.getUidsFromData(n);this.respond(m,n);}},respond:function(l,m){if(!l.getValue()){l.setValue('');var n=m.buildUids(' ',this._uids);m.respond('',n);}},getUidsFromData:function(l){var m=l.getAllEntries(),n=[];for(var o in m)if(m[o].bootstrapped)n.push({uid:m[o].uid,index:m[o].index});n.sort(function(p,q){return p.index-q.index;});n=n.slice(0,j);return n.map(function(p){return p.uid;});}});e.exports=k;});